// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: query_chat.sql

package q

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createChatCfg = `-- name: CreateChatCfg :exec
INSERT INTO chat_cfg (id, web_id, auto_cvt_bili, auto_ocr, auto_calculate, auto_exchange, auto_check_adult,
                      save_messages, enable_coc, resp_nsfw_msg, timezone)
VALUES ($1, $2, $3, $4, $5, $6,
        $7, $8, $9, $10, $11)
`

type CreateChatCfgParams struct {
	ID             int64       `json:"id"`
	WebID          pgtype.Int8 `json:"web_id"`
	AutoCvtBili    bool        `json:"auto_cvt_bili"`
	AutoOcr        bool        `json:"auto_ocr"`
	AutoCalculate  bool        `json:"auto_calculate"`
	AutoExchange   bool        `json:"auto_exchange"`
	AutoCheckAdult bool        `json:"auto_check_adult"`
	SaveMessages   bool        `json:"save_messages"`
	EnableCoc      bool        `json:"enable_coc"`
	RespNsfwMsg    bool        `json:"resp_nsfw_msg"`
	Timezone       int32       `json:"timezone"`
}

func (q *Queries) CreateChatCfg(ctx context.Context, arg CreateChatCfgParams) error {
	_, err := q.db.Exec(ctx, createChatCfg,
		arg.ID,
		arg.WebID,
		arg.AutoCvtBili,
		arg.AutoOcr,
		arg.AutoCalculate,
		arg.AutoExchange,
		arg.AutoCheckAdult,
		arg.SaveMessages,
		arg.EnableCoc,
		arg.RespNsfwMsg,
		arg.Timezone,
	)
	return err
}

const updateChatStatDaily = `-- name: UpdateChatStatDaily :exec
UPDATE chat_stat_daily
SET message_count        = $1,
    photo_count          = $2,
    video_count          = $3,
    sticker_count        = $4,
    forward_count        = $5,
    mars_count           = $6,
    max_mars_count       = $7,
    racy_count           = $8,
    adult_count          = $9,
    download_video_count = $10,
    download_audio_count = $11,
    dio_add_user_count   = $12,
    dio_ban_user_count   = $13,
    user_msg_stat        = $14,
    msg_count_by_time    = $15,
    msg_id_at_time_start = $16
WHERE chat_id = $17
  AND stat_date = $18
`

type UpdateChatStatDailyParams struct {
	MessageCount       int64          `json:"message_count"`
	PhotoCount         int64          `json:"photo_count"`
	VideoCount         int64          `json:"video_count"`
	StickerCount       int64          `json:"sticker_count"`
	ForwardCount       int64          `json:"forward_count"`
	MarsCount          int64          `json:"mars_count"`
	MaxMarsCount       int64          `json:"max_mars_count"`
	RacyCount          int64          `json:"racy_count"`
	AdultCount         int64          `json:"adult_count"`
	DownloadVideoCount int64          `json:"download_video_count"`
	DownloadAudioCount int64          `json:"download_audio_count"`
	DioAddUserCount    int64          `json:"dio_add_user_count"`
	DioBanUserCount    int64          `json:"dio_ban_user_count"`
	UserMsgStat        UserMsgStatMap `json:"user_msg_stat"`
	MsgCountByTime     TenMinuteStats `json:"msg_count_by_time"`
	MsgIDAtTimeStart   TenMinuteStats `json:"msg_id_at_time_start"`
	ChatID             int64          `json:"chat_id"`
	StatDate           int32          `json:"stat_date"`
}

func (q *Queries) UpdateChatStatDaily(ctx context.Context, arg UpdateChatStatDailyParams) error {
	_, err := q.db.Exec(ctx, updateChatStatDaily,
		arg.MessageCount,
		arg.PhotoCount,
		arg.VideoCount,
		arg.StickerCount,
		arg.ForwardCount,
		arg.MarsCount,
		arg.MaxMarsCount,
		arg.RacyCount,
		arg.AdultCount,
		arg.DownloadVideoCount,
		arg.DownloadAudioCount,
		arg.DioAddUserCount,
		arg.DioBanUserCount,
		arg.UserMsgStat,
		arg.MsgCountByTime,
		arg.MsgIDAtTimeStart,
		arg.ChatID,
		arg.StatDate,
	)
	return err
}

const createChatStatDaily = `-- name: createChatStatDaily :one
INSERT INTO chat_stat_daily (chat_id, stat_date)
VALUES ($1, $2)
RETURNING chat_id, stat_date, message_count, photo_count, video_count, sticker_count, forward_count, mars_count, max_mars_count, racy_count, adult_count, download_video_count, download_audio_count, dio_add_user_count, dio_ban_user_count, user_msg_stat, msg_count_by_time, msg_id_at_time_start
`

func (q *Queries) createChatStatDaily(ctx context.Context, chatID int64, statDate int32) (ChatStatDaily, error) {
	row := q.db.QueryRow(ctx, createChatStatDaily, chatID, statDate)
	var i ChatStatDaily
	err := row.Scan(
		&i.ChatID,
		&i.StatDate,
		&i.MessageCount,
		&i.PhotoCount,
		&i.VideoCount,
		&i.StickerCount,
		&i.ForwardCount,
		&i.MarsCount,
		&i.MaxMarsCount,
		&i.RacyCount,
		&i.AdultCount,
		&i.DownloadVideoCount,
		&i.DownloadAudioCount,
		&i.DioAddUserCount,
		&i.DioBanUserCount,
		&i.UserMsgStat,
		&i.MsgCountByTime,
		&i.MsgIDAtTimeStart,
	)
	return i, err
}

const getChatCfgById = `-- name: getChatCfgById :one

SELECT id, web_id, auto_cvt_bili, auto_ocr, auto_calculate, auto_exchange, auto_check_adult, save_messages, enable_coc, resp_nsfw_msg, timezone
FROM chat_cfg
WHERE id = $1
`

// encoding: utf-8
func (q *Queries) getChatCfgById(ctx context.Context, id int64) (chatCfg, error) {
	row := q.db.QueryRow(ctx, getChatCfgById, id)
	var i chatCfg
	err := row.Scan(
		&i.ID,
		&i.WebID,
		&i.AutoCvtBili,
		&i.AutoOcr,
		&i.AutoCalculate,
		&i.AutoExchange,
		&i.AutoCheckAdult,
		&i.SaveMessages,
		&i.EnableCoc,
		&i.RespNsfwMsg,
		&i.Timezone,
	)
	return i, err
}

const getChatIdByWebId = `-- name: getChatIdByWebId :one
SELECT id
FROM chat_cfg
WHERE web_id = $1
`

func (q *Queries) getChatIdByWebId(ctx context.Context, webID pgtype.Int8) (int64, error) {
	row := q.db.QueryRow(ctx, getChatIdByWebId, webID)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const getChatStat = `-- name: getChatStat :one
SELECT chat_id, stat_date, message_count, photo_count, video_count, sticker_count, forward_count, mars_count, max_mars_count, racy_count, adult_count, download_video_count, download_audio_count, dio_add_user_count, dio_ban_user_count, user_msg_stat, msg_count_by_time, msg_id_at_time_start
FROM chat_stat_daily
WHERE chat_stat_daily.chat_id = $1
  AND chat_stat_daily.stat_date = $2
`

func (q *Queries) getChatStat(ctx context.Context, chatID int64, statDate int32) (ChatStatDaily, error) {
	row := q.db.QueryRow(ctx, getChatStat, chatID, statDate)
	var i ChatStatDaily
	err := row.Scan(
		&i.ChatID,
		&i.StatDate,
		&i.MessageCount,
		&i.PhotoCount,
		&i.VideoCount,
		&i.StickerCount,
		&i.ForwardCount,
		&i.MarsCount,
		&i.MaxMarsCount,
		&i.RacyCount,
		&i.AdultCount,
		&i.DownloadVideoCount,
		&i.DownloadAudioCount,
		&i.DioAddUserCount,
		&i.DioBanUserCount,
		&i.UserMsgStat,
		&i.MsgCountByTime,
		&i.MsgIDAtTimeStart,
	)
	return i, err
}

const updateChatCfg = `-- name: updateChatCfg :exec
UPDATE chat_cfg
SET auto_cvt_bili=$1,
    auto_ocr=$2,
    auto_calculate=$3,
    auto_exchange=$4,
    auto_check_adult=$5,
    save_messages=$6,
    enable_coc=$7,
    resp_nsfw_msg=$8
WHERE id = $9
`

type updateChatCfgParams struct {
	AutoCvtBili    bool  `json:"auto_cvt_bili"`
	AutoOcr        bool  `json:"auto_ocr"`
	AutoCalculate  bool  `json:"auto_calculate"`
	AutoExchange   bool  `json:"auto_exchange"`
	AutoCheckAdult bool  `json:"auto_check_adult"`
	SaveMessages   bool  `json:"save_messages"`
	EnableCoc      bool  `json:"enable_coc"`
	RespNsfwMsg    bool  `json:"resp_nsfw_msg"`
	ID             int64 `json:"id"`
}

func (q *Queries) updateChatCfg(ctx context.Context, arg updateChatCfgParams) error {
	_, err := q.db.Exec(ctx, updateChatCfg,
		arg.AutoCvtBili,
		arg.AutoOcr,
		arg.AutoCalculate,
		arg.AutoExchange,
		arg.AutoCheckAdult,
		arg.SaveMessages,
		arg.EnableCoc,
		arg.RespNsfwMsg,
		arg.ID,
	)
	return err
}

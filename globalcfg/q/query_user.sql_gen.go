// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: query_user.sql

package q

import (
	"context"
	"database/sql"
)

const getPrprCache = `-- name: GetPrprCache :one
SELECT prpr_file_id
FROM prpr_caches
WHERE profile_photo_uid = ?
`

func (q *Queries) GetPrprCache(ctx context.Context, profilePhotoUid string) (string, error) {
	row := q.db.QueryRowContext(ctx, getPrprCache, profilePhotoUid)
	var prpr_file_id string
	err := row.Scan(&prpr_file_id)
	return prpr_file_id, err
}

const setPrprCache = `-- name: SetPrprCache :exec
INSERT INTO prpr_caches (profile_photo_uid, prpr_file_id)
VALUES (?, ?)
`

func (q *Queries) SetPrprCache(ctx context.Context, profilePhotoUid string, prprFileID string) error {
	_, err := q.db.ExecContext(ctx, setPrprCache, profilePhotoUid, prprFileID)
	return err
}

const updateUserBase = `-- name: updateUserBase :one

INSERT INTO users (updated_at, user_id, first_name, last_name, time_zone)
VALUES (?, ?, ?, ?, ?)
ON CONFLICT DO UPDATE SET updated_at=excluded.updated_at,
                          first_name=excluded.first_name,
                          last_name =excluded.last_name,
                          time_zone=excluded.time_zone
RETURNING id
`

type updateUserBaseParams struct {
	UpdatedAt UnixTime
	UserID    int64
	FirstName string
	LastName  sql.NullString
	TimeZone  sql.NullInt64
}

// encoding: utf-8
func (q *Queries) updateUserBase(ctx context.Context, arg updateUserBaseParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, updateUserBase,
		arg.UpdatedAt,
		arg.UserID,
		arg.FirstName,
		arg.LastName,
		arg.TimeZone,
	)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const updateUserProfilePhoto = `-- name: updateUserProfilePhoto :exec
INSERT INTO users (user_id, profile_update_at, profile_photo)
VALUES (?, ?, ?)
ON CONFLICT DO UPDATE SET profile_update_at = excluded.profile_update_at,
                          profile_photo     = excluded.profile_photo
`

func (q *Queries) updateUserProfilePhoto(ctx context.Context, userID int64, profileUpdateAt UnixTime, profilePhoto sql.NullString) error {
	_, err := q.db.ExecContext(ctx, updateUserProfilePhoto, userID, profileUpdateAt, profilePhoto)
	return err
}

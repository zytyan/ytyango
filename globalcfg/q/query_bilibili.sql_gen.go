// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: query_bilibili.sql

package q

import (
	"context"
)

const getBiliInlineData = `-- name: GetBiliInlineData :one

SELECT text, chat_id, msg_id
FROM bili_inline_results
WHERE uid = ?
`

type GetBiliInlineDataRow struct {
	Text   string
	ChatID int64
	MsgID  int64
}

// encoding: utf-8
func (q *Queries) GetBiliInlineData(ctx context.Context, uid int64) (GetBiliInlineDataRow, error) {
	row := q.db.QueryRowContext(ctx, getBiliInlineData, uid)
	var i GetBiliInlineDataRow
	err := row.Scan(&i.Text, &i.ChatID, &i.MsgID)
	return i, err
}

const insertBiliInlineData = `-- name: InsertBiliInlineData :one
INSERT INTO bili_inline_results
    DEFAULT
VALUES
/*这里只插入一个uid，并由数据库返回，因为chat
`

func (q *Queries) InsertBiliInlineData(ctx context.Context) (int64, error) {
	row := q.db.QueryRowContext(ctx, insertBiliInlineData)
	var uid int64
	err := row.Scan(&uid)
	return uid, err
}

const updateBiliInlineMsgId = `-- name: UpdateBiliInlineMsgId :exec
d和msg id只有发出去了之后才知道*/
RETURNING uid;

UPDATE bili_inline_results
SET
`

func (q *Queries) UpdateBiliInlineMsgId(ctx context.Context, text string, chatID int64, msgID int64, uid int64) error {
	_, err := q.db.ExecContext(ctx, updateBiliInlineMsgId,
		text,
		chatID,
		msgID,
		uid,
	)
	return err
}
